{{define "title"}}My posts{{end}}
{{define "main"}}
{{with .Post}}
<div class="post_main">
    <div class="view-page">
        <div class='post'>
            <div class="username-photo-post">
                <img class="user-profile-photo" src="/static/profile_photo/{{ .ProfilePhoto}}" alt="">
                <h2>{{.UserName}}</h2>
            </div>
            <div class='post-box post-title'>
                <strong>{{.Title}}</strong>
            </div>
            <p>{{.Content}}</p>
            {{if .Image}}
            <div class="view_image_back">
                <img class="post-img" src="/static/uploads/{{ .Image}}" alt="{{.Image}}">
            </div>
            {{end}}
            <div class='post-box'>
                {{if .IsAuthenticated}}
                    <a class="reaction like" href="/likePost?id={{.ID}}"><img src="/static/img/like.png" alt="Like" ></a>
                    <strong>{{.Likes}}</strong>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <a class="reaction dislike" href="/dislikePost?id={{.ID}}"><img src="/static/img/dislike.png" alt="Dislike"></a>
                    <strong>{{.Dislikes}}</strong>
                {{else}}
                    <img src="/static/img/like.png" alt="Like">
                    <strong>{{.Likes}}</strong>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <img src="/static/img/dislike.png" alt="Dislike">
                    <strong>{{.Dislikes}}</strong>
                {{end}}
                <br>
                <div class="post-time-box">
                    <time class="post-time">{{humanDate .Created}}</time><br>
                </div>
                
            </div>
        </div>
    {{end}}
    
    <div class="container"> 
        <ul class="ks-cboxtags-post">
            {{range .PostCategoriesForm}}
            <li><input type="hidden" id="checkboxOne"><label for="checkboxOne">{{ .CategoriesName}}</label></li>
            {{end}}
        </ul>
    </div>

    {{if .Comments}}
        <div class="comments">
            <h3>Comments:</h3>
                {{range .Comments}}
                    <div class="comment-box">
                        <div class="comment">
                            <div class="comment-header">
                                <div class="comment-author">
                                    <img class="user-profile-photo" src="/static/profile_photo/{{ .AuthorProfilePhoto}}" alt="">
                                    <strong class="comment-author-name">{{.Author}}</strong>
                                </div>
                            </div>
                            <div class="comment-body">
                                <p>{{.CContent}}</p>
                            </div>
                            <div class="comment-reactions">
                                {{if .IsAuthenticated}}
                                    <a class="reaction comment-like" href="/likeComment?id={{.Id}}"><img src="/static/img/like.png" alt="Like"></a>
                                    <strong>{{.Likes}}</strong>
                                    <span>&nbsp;</span>
                                    <a class="reaction comment-dislike" href="/dislikeComment?id={{.Id}}"><img src="/static/img/dislike.png" alt="Dislike"></a>
                                    <strong>{{.Dislikes}}</strong>
                                {{else}}
                                    <img src="/static/img/like.png" alt="Like">
                                    <strong>{{.Likes}}</strong>
                                    <span>&nbsp;</span>
                                    <img src="/static/img/dislike.png" alt="Dislike">
                                    <strong>{{.Dislikes}}</strong>
                                {{end}}
                            </div>
                        </div>
                    </div>
                {{end}}
        </div>
    {{end}}



    {{if .IsAuthenticated}}
    <form method="POST" action="/post/view/{{.Post.ID}}">
        <div class="form-group">
            <label for="comment-{{.Post.ID}}">Add a Comment:</label>
            <textarea class="form-control no-resize" id="comment-{{.Post.ID}}" name="comment" rows="3"></textarea>
            {{if .CommentError}}
            <div class="error-message">
                <p>Please enter a valid comment.</p>
            </div>
            {{end}}
        </div>
        <button type="submit" class="btn btn-primary cs-button">Submit</button>
    </form>
    {{else}}
    <p>Please <a class="login-link" href="/user/login">login</a> to post a comment or react to posts/comments.</p>
    {{end}}
    {{end}}
    </div>
</div>